{
  "family": "kudiapp-task",
  "networkMode": "awsvpc",
  "requiresCompatibilities": ["FARGATE"],
  "cpu": "512",
  "memory": "1024",
  "runtimePlatform": {
    "cpuArchitecture": "X86_64",
    "operatingSystemFamily": "LINUX"
  },
  "containerDefinitions": [
    {
      "name": "kudiapp",
      "image": "DOCKERHUB_USERNAME/kudiapp:latest",
      "essential": true,
      "portMappings": [
        {
          "containerPort": 8083,
          "protocol": "tcp"
        }
      ],
      "environment": [
        {"name": "SERVER_PORT", "value": "8083"},
        {"name": "APP_EMAIL_URL", "value": "PLACEHOLDER"},
        {"name": "APP_JWT_SECRET", "value": "PLACEHOLDER"},
        {"name": "APP_JWT_EXPIRATION_MS", "value": "86400000"},
        {"name": "APP_JWT_REFRESH_EXPIRATION_MS", "value": "604800000"},
        {"name": "MANAGEMENT_ENDPOINTS_WEB_EXPOSURE_INCLUDE", "value": "health,info"},
        {"name": "MANAGEMENT_ENDPOINT_HEALTH_SHOW_DETAILS", "value": "always"},
        {"name": "MANAGEMENT_ENDPOINT_HEALTH_ACCESS", "value": "unrestricted"},
        {"name": "MANAGEMENT_ENDPOINT_INFO_ACCESS", "value": "unrestricted"},
        {"name": "SPRING_DATASOURCE_URL", "value": "PLACEHOLDER"},
        {"name": "SPRING_DATASOURCE_USERNAME", "value": "PLACEHOLDER"},
        {"name": "SPRING_DATASOURCE_PASSWORD", "value": "PLACEHOLDER"},
        {"name": "SPRING_DATASOURCE_DRIVER_CLASS_NAME", "value": "org.postgresql.Driver"},
        {"name": "SPRING_JPA_HIBERNATE_DDL_AUTO", "value": "update"},
        {"name": "SPRING_DATASOURCE_HIKARI_CONNECTION_TIMEOUT", "value": "20000"},
        {"name": "SPRING_DATASOURCE_HIKARI_MAXIMUM_POOL_SIZE", "value": "5"},
        {"name": "LOGGING_LEVEL_SPRING_SECURITY", "value": "INFO"},
        {"name": "LOGGING_LEVEL_SPRING_SECURITY_CONFIG", "value": "INFO"},
        {"name": "DEBUG_MODE", "value": "false"},
        {"name": "SPRING_MAIL_HOST", "value": "smtp.gmail.com"},
        {"name": "SPRING_MAIL_PORT", "value": "587"},
        {"name": "SPRING_MAIL_USERNAME", "value": "kudija99@gmail.com"},
        {"name": "SPRING_MAIL_PASSWORD", "value": "PLACEHOLDER"},
        {"name": "SPRING_MAIL_SMTP_AUTH", "value": "true"},
        {"name": "SPRING_MAIL_STARTTLS_ENABLE", "value": "true"},
        {"name": "SPRING_MAIL_SSL_TRUST", "value": "smtp.gmail.com"},
        {"name": "AWS_S3_BUCKET_NAME", "value": "PLACEHOLDER"},
        {"name": "AWS_S3_REGION", "value": "us-east-1"},
        {"name": "AWS_ACCESS_KEY_ID", "value": "PLACEHOLDER"},
        {"name": "AWS_SECRET_ACCESS_KEY", "value": "PLACEHOLDER"}
      ],
      "logConfiguration": {
        "logDriver": "awslogs",
        "options": {
          "awslogs-group": "/ecs/kudiapp",
          "awslogs-region": "us-east-1",
          "awslogs-stream-prefix": "ecs",
          "awslogs-create-group": "true"
        }
      },
      "healthCheck": {
        "command": ["CMD-SHELL", "curl -f http://localhost:8083/actuator/health || exit 1"],
        "interval": 30,
        "timeout": 10,
        "retries": 3,
        "startPeriod": 300
      }
    }
  ],
  "executionRoleArn": "arn:aws:iam::<AWS_ACCOUNT_ID>:role/ecsTaskExecutionRole",
  "taskRoleArn": "arn:aws:iam::<AWS_ACCOUNT_ID>:role/ecsTaskRole"
}